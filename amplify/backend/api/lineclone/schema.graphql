type User
  @model
  @auth(rules: [
    { allow: private, operations: [read] }
  ]) {
    id: ID!
    name: String!
    statusMessage: String!
    image: String

    friends: [UserFriend] 
      @hasMany(indexName: "friends", fields: ["id"])
    friendOf: [UserFriend] 
      @hasMany(indexName: "friendOf", fields: ["id"])
}

type UserFriend
  @model 
  @auth(rules: [
    { allow: private, operations: [read] }
  ]) {
  id: ID!
  userID: ID! 
    @index(name: "friends")
  user: User 
    @belongsTo(fields: ["userID"])

  friendID: ID! 
    @index(name: "friendOf")
  friend: User 
    @belongsTo(fields: ["friendID"])

  status: String!
}